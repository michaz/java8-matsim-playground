BASE=output

berlin/uncongested3/output-berlin <- !input/berlin/2kW.15.xml
	mvn exec:java -Dexec.mainClass="berlin.BerlinRunUncongested3" -Dexec.args="$INPUT $OUTPUT"

berlin/uncongested3/alternatives/random-heavy-users/sightings <- berlin/uncongested3/output-berlin
	mvn exec:java -Dexec.mainClass="populationsize.RunRandomHeavyUsers" -Dexec.args="$INPUT $OUTPUT"
berlin/uncongested3/alternatives/random-heavy-users/alternatives/full-procedure/run <- berlin/uncongested3/output-berlin, berlin/uncongested3/alternatives/random-heavy-users/sightings
	mvn exec:java -Dexec.mainClass="populationsize.RunSimulation" -Dexec.args="$INPUT0 $INPUT1 $OUTPUT"
berlin/uncongested3/alternatives/random-heavy-users/alternatives/full-procedure/en-route.pdf <- berlin/uncongested3/output-berlin, berlin/uncongested3/alternatives/random-heavy-users/alternatives/full-procedure/run
	Rscript en-route.R $INPUT0 $INPUT1 $OUTPUT

berlin/uncongested3/alternatives/worker-heavy-users/sightings <- berlin/uncongested3/output-berlin
	mvn exec:java -Dexec.mainClass="populationsize.RunWorkerNonWorker" -Dexec.args="$INPUT $OUTPUT"
berlin/uncongested3/alternatives/worker-heavy-users/alternatives/full-procedure/run <- berlin/uncongested3/output-berlin, berlin/uncongested3/alternatives/worker-heavy-users/sightings
	mvn exec:java -Dexec.mainClass="populationsize.RunSimulation" -Dexec.args="full-procedure $INPUT0 $INPUT1 $OUTPUT"
berlin/uncongested3/alternatives/worker-heavy-users/alternatives/full-procedure/en-route.pdf <- berlin/uncongested3/output-berlin, berlin/uncongested3/alternatives/worker-heavy-users/alternatives/full-procedure/run
	Rscript en-route.R $INPUT0 $INPUT1 $OUTPUT
berlin/uncongested3/alternatives/worker-heavy-users/alternatives/clone/run <- berlin/uncongested3/output-berlin, berlin/uncongested3/alternatives/worker-heavy-users/sightings
	mvn exec:java -Dexec.mainClass="populationsize.RunSimulation" -Dexec.args="clone $INPUT0 $INPUT1 $OUTPUT"
berlin/uncongested3/alternatives/worker-heavy-users/alternatives/clone/en-route.pdf <- berlin/uncongested3/output-berlin, berlin/uncongested3/alternatives/worker-heavy-users/alternatives/clone/run
	Rscript en-route.R $INPUT0 $INPUT1 $OUTPUT

%trajectorySimilarityApp <- berlin/uncongested3/output-berlin, berlin/uncongested3/alternatives/worker-heavy-users/sightings
	mvn exec:java -Dexec.mainClass="fx.TrajectorySimilarityApp" -Dexec.args="--baseRunDir=$INPUT0 --sightingsDir=$INPUT1"
berlin/uncongested3/alternatives/worker-heavy-users/trajectory-similarity-figures <- berlin/uncongested3/output-berlin, berlin/uncongested3/alternatives/worker-heavy-users/sightings
	mvn exec:java -Dexec.mainClass="fx.RunTrajectorySimilarityFigures" -Dexec.args="--baseRunDir=$INPUT0 --sightingsDir=$INPUT1 --output=$OUTPUT --sparse=17167184 --dense=16159661"

berlin/uncongested3/alternatives/only-heavy-users/sightings <- berlin/uncongested3/output-berlin
	mvn exec:java -Dexec.mainClass="populationsize.RunOnlyHeavyUsers" -Dexec.args="$INPUT $OUTPUT"
berlin/uncongested3/alternatives/only-heavy-users/alternatives/segmentation-only/run <- berlin/uncongested3/output-berlin, berlin/uncongested3/alternatives/only-heavy-users/sightings
	mvn exec:java -Dexec.mainClass="segmenttraces.RunTrajectorySegmentationOnly" -Dexec.args="$INPUT0 $INPUT1 $OUTPUT"
berlin/uncongested3/alternatives/only-heavy-users/alternatives/segmentation-only/activity-structure.png <- berlin/uncongested3/output-berlin, berlin/uncongested3/alternatives/only-heavy-users/sightings, berlin/uncongested3/alternatives/only-heavy-users/alternatives/segmentation-only/run
	mvn exec:java -Dexec.mainClass="segmenttraces.RunActivityStructure" -Dexec.args="$INPUT0 $INPUT1 $INPUT2 $OUTPUT"
berlin/uncongested3/alternatives/only-heavy-users/alternatives/segmentation-only/activity-structure-distance.png <- berlin/uncongested3/output-berlin, berlin/uncongested3/alternatives/only-heavy-users/alternatives/segmentation-only/run
	mvn exec:java -Dexec.mainClass="segmenttraces.RunActivityStructureDistance" -Dexec.args="--baseRunDir=$INPUT0 --runDir=$INPUT1 --output=$OUTPUT"

berlin/congested3/output-berlin <- !input/berlin/2kW.15.xml
	mvn exec:java -Dexec.mainClass="berlin.BerlinRunCongested3" -Dexec.args="$INPUT $OUTPUT"

berlin/congested3/alternatives/only-heavy-users/sightings <- berlin/congested3/output-berlin
	mvn exec:java -Dexec.mainClass="populationsize.RunOnlyHeavyUsers" -Dexec.args="$INPUT $OUTPUT"

guice <- !input/berlin/2kW.15.xml
	mvn exec:java -Dexec.mainClass="guice.Graph" -Dexec.args="$INPUT guice.MyModule $OUTPUT"
guice.svg <- guice
	dot -Tsvg -o$OUTPUT $INPUT/guice.dot
